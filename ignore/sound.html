<!DOCTYPE html>
<html>
<head>
    <title>AudioContext Test</title>
</head>
<body>
<button id="play">🔊 Play Test Sound</button>

<script>
  const audioContext = new AudioContext();

  const GOOD_WAV = 'data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAIlYAAESsAAACABAAZGF0YRAAAAAA//8AAP//AAD//wAA//8AAP//AAD//wAA';

  document.getElementById('play').addEventListener('click', () => {
    const base64 = GOOD_WAV.split(',')[1];
    const binary = atob(base64);
    const bytes = new Uint8Array(binary.length);
    for (let i = 0; i < binary.length; i++) {
      bytes[i] = binary.charCodeAt(i);
    }

    audioContext.decodeAudioData(bytes.buffer).then(buffer => {
      const source = audioContext.createBufferSource();
      source.buffer = buffer;
      source.connect(audioContext.destination);
      source.start();
      console.log('✅ Played sound');
    }).catch(err => {
      console.error('❌ decodeAudioData failed:', err);
    });
  });
</script>
</body>
</html>
